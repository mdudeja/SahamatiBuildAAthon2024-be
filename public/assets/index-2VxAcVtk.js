(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var _e,y,Gt,Qt,Y,bt,Zt,Xe,ct,Ge,Qe,en,fe={},tn=[],Dn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Ie=Array.isArray;function D(t,e){for(var n in e)t[n]=e[n];return t}function nn(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function F(t,e,n){var r,i,s,o={};for(s in e)s=="key"?r=e[s]:s=="ref"?i=e[s]:o[s]=e[s];if(arguments.length>2&&(o.children=arguments.length>3?_e.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(s in t.defaultProps)o[s]===void 0&&(o[s]=t.defaultProps[s]);return le(t,o,r,i,null)}function le(t,e,n,r,i){var s={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:i??++Gt,__i:-1,__u:0};return i==null&&y.vnode!=null&&y.vnode(s),s}function ee(t){return t.children}function B(t,e){this.props=t,this.context=e}function te(t,e){if(e==null)return t.__?te(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?te(t):null}function rn(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return rn(t)}}function Ze(t){(!t.__d&&(t.__d=!0)&&Y.push(t)&&!Le.__r++||bt!==y.debounceRendering)&&((bt=y.debounceRendering)||Zt)(Le)}function Le(){var t,e,n,r,i,s,o,a;for(Y.sort(Xe);t=Y.shift();)t.__d&&(e=Y.length,r=void 0,s=(i=(n=t).__v).__e,o=[],a=[],n.__P&&((r=D({},i)).__v=i.__v+1,y.vnode&&y.vnode(r),ut(n.__P,r,i,n.__n,n.__P.namespaceURI,32&i.__u?[s]:null,o,s??te(i),!!(32&i.__u),a),r.__v=i.__v,r.__.__k[r.__i]=r,an(o,r,a),r.__e!=s&&rn(r)),Y.length>e&&Y.sort(Xe));Le.__r=0}function sn(t,e,n,r,i,s,o,a,c,l,f){var u,d,p,_,R,k=r&&r.__k||tn,m=e.length;for(n.__d=c,Fn(n,e,k),c=n.__d,u=0;u<m;u++)(p=n.__k[u])!=null&&(d=p.__i===-1?fe:k[p.__i]||fe,p.__i=u,ut(t,p,d,i,s,o,a,c,l,f),_=p.__e,p.ref&&d.ref!=p.ref&&(d.ref&&lt(d.ref,null,p),f.push(p.ref,p.__c||_,p)),R==null&&_!=null&&(R=_),65536&p.__u||d.__k===p.__k?c=on(p,c,t):typeof p.type=="function"&&p.__d!==void 0?c=p.__d:_&&(c=_.nextSibling),p.__d=void 0,p.__u&=-196609);n.__d=c,n.__e=R}function Fn(t,e,n){var r,i,s,o,a,c=e.length,l=n.length,f=l,u=0;for(t.__k=[],r=0;r<c;r++)(i=e[r])!=null&&typeof i!="boolean"&&typeof i!="function"?(o=r+u,(i=t.__k[r]=typeof i=="string"||typeof i=="number"||typeof i=="bigint"||i.constructor==String?le(null,i,null,null,null):Ie(i)?le(ee,{children:i},null,null,null):i.constructor===void 0&&i.__b>0?le(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i).__=t,i.__b=t.__b+1,s=null,(a=i.__i=Mn(i,n,o,f))!==-1&&(f--,(s=n[a])&&(s.__u|=131072)),s==null||s.__v===null?(a==-1&&u--,typeof i.type!="function"&&(i.__u|=65536)):a!==o&&(a==o-1?u--:a==o+1?u++:(a>o?u--:u++,i.__u|=65536))):i=t.__k[r]=null;if(f)for(r=0;r<l;r++)(s=n[r])!=null&&!(131072&s.__u)&&(s.__e==t.__d&&(t.__d=te(s)),cn(s,s))}function on(t,e,n){var r,i;if(typeof t.type=="function"){for(r=t.__k,i=0;r&&i<r.length;i++)r[i]&&(r[i].__=t,e=on(r[i],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=te(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function pe(t,e){return e=e||[],t==null||typeof t=="boolean"||(Ie(t)?t.some(function(n){pe(n,e)}):e.push(t)),e}function Mn(t,e,n,r){var i=t.key,s=t.type,o=n-1,a=n+1,c=e[n];if(c===null||c&&i==c.key&&s===c.type&&!(131072&c.__u))return n;if(r>(c!=null&&!(131072&c.__u)?1:0))for(;o>=0||a<e.length;){if(o>=0){if((c=e[o])&&!(131072&c.__u)&&i==c.key&&s===c.type)return o;o--}if(a<e.length){if((c=e[a])&&!(131072&c.__u)&&i==c.key&&s===c.type)return a;a++}}return-1}function wt(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Dn.test(e)?n:n+"px"}function we(t,e,n,r,i){var s;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||wt(t.style,e,"");if(n)for(e in n)r&&n[e]===r[e]||wt(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")s=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=n,n?r?n.u=r.u:(n.u=ct,t.addEventListener(e,s?Qe:Ge,s)):t.removeEventListener(e,s?Qe:Ge,s);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function kt(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=ct++;else if(e.t<n.u)return;return n(y.event?y.event(e):e)}}}function ut(t,e,n,r,i,s,o,a,c,l){var f,u,d,p,_,R,k,m,b,H,O,q,K,be,X,E,A=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(c=!!(32&n.__u),s=[a=e.__e=n.__e]),(f=y.__b)&&f(e);e:if(typeof A=="function")try{if(m=e.props,b="prototype"in A&&A.prototype.render,H=(f=A.contextType)&&r[f.__c],O=f?H?H.props.value:f.__:r,n.__c?k=(u=e.__c=n.__c).__=u.__E:(b?e.__c=u=new A(m,O):(e.__c=u=new B(m,O),u.constructor=A,u.render=Wn),H&&H.sub(u),u.props=m,u.state||(u.state={}),u.context=O,u.__n=r,d=u.__d=!0,u.__h=[],u._sb=[]),b&&u.__s==null&&(u.__s=u.state),b&&A.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=D({},u.__s)),D(u.__s,A.getDerivedStateFromProps(m,u.__s))),p=u.props,_=u.state,u.__v=e,d)b&&A.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),b&&u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(b&&A.getDerivedStateFromProps==null&&m!==p&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(m,O),!u.__e&&(u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(m,u.__s,O)===!1||e.__v===n.__v)){for(e.__v!==n.__v&&(u.props=m,u.state=u.__s,u.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(G){G&&(G.__=e)}),q=0;q<u._sb.length;q++)u.__h.push(u._sb[q]);u._sb=[],u.__h.length&&o.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(m,u.__s,O),b&&u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(p,_,R)})}if(u.context=O,u.props=m,u.__P=t,u.__e=!1,K=y.__r,be=0,b){for(u.state=u.__s,u.__d=!1,K&&K(e),f=u.render(u.props,u.state,u.context),X=0;X<u._sb.length;X++)u.__h.push(u._sb[X]);u._sb=[]}else do u.__d=!1,K&&K(e),f=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++be<25);u.state=u.__s,u.getChildContext!=null&&(r=D(D({},r),u.getChildContext())),b&&!d&&u.getSnapshotBeforeUpdate!=null&&(R=u.getSnapshotBeforeUpdate(p,_)),sn(t,Ie(E=f!=null&&f.type===ee&&f.key==null?f.props.children:f)?E:[E],e,n,r,i,s,o,a,c,l),u.base=e.__e,e.__u&=-161,u.__h.length&&o.push(u),k&&(u.__E=u.__=null)}catch(G){if(e.__v=null,c||s!=null){for(e.__u|=c?160:128;a&&a.nodeType===8&&a.nextSibling;)a=a.nextSibling;s[s.indexOf(a)]=null,e.__e=a}else e.__e=n.__e,e.__k=n.__k;y.__e(G,e,n)}else s==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=Hn(n.__e,e,n,r,i,s,o,c,l);(f=y.diffed)&&f(e)}function an(t,e,n){e.__d=void 0;for(var r=0;r<n.length;r++)lt(n[r],n[++r],n[++r]);y.__c&&y.__c(e,t),t.some(function(i){try{t=i.__h,i.__h=[],t.some(function(s){s.call(i)})}catch(s){y.__e(s,i.__v)}})}function Hn(t,e,n,r,i,s,o,a,c){var l,f,u,d,p,_,R,k=n.props,m=e.props,b=e.type;if(b==="svg"?i="http://www.w3.org/2000/svg":b==="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),s!=null){for(l=0;l<s.length;l++)if((p=s[l])&&"setAttribute"in p==!!b&&(b?p.localName===b:p.nodeType===3)){t=p,s[l]=null;break}}if(t==null){if(b===null)return document.createTextNode(m);t=document.createElementNS(i,b,m.is&&m),a&&(y.__m&&y.__m(e,s),a=!1),s=null}if(b===null)k===m||a&&t.data===m||(t.data=m);else{if(s=s&&_e.call(t.childNodes),k=n.props||fe,!a&&s!=null)for(k={},l=0;l<t.attributes.length;l++)k[(p=t.attributes[l]).name]=p.value;for(l in k)if(p=k[l],l!="children"){if(l=="dangerouslySetInnerHTML")u=p;else if(!(l in m)){if(l=="value"&&"defaultValue"in m||l=="checked"&&"defaultChecked"in m)continue;we(t,l,null,p,i)}}for(l in m)p=m[l],l=="children"?d=p:l=="dangerouslySetInnerHTML"?f=p:l=="value"?_=p:l=="checked"?R=p:a&&typeof p!="function"||k[l]===p||we(t,l,p,k[l],i);if(f)a||u&&(f.__html===u.__html||f.__html===t.innerHTML)||(t.innerHTML=f.__html),e.__k=[];else if(u&&(t.innerHTML=""),sn(t,Ie(d)?d:[d],e,n,r,b==="foreignObject"?"http://www.w3.org/1999/xhtml":i,s,o,s?s[0]:n.__k&&te(n,0),a,c),s!=null)for(l=s.length;l--;)nn(s[l]);a||(l="value",b==="progress"&&_==null?t.removeAttribute("value"):_!==void 0&&(_!==t[l]||b==="progress"&&!_||b==="option"&&_!==k[l])&&we(t,l,_,k[l],i),l="checked",R!==void 0&&R!==t[l]&&we(t,l,R,k[l],i))}return t}function lt(t,e,n){try{if(typeof t=="function"){var r=typeof t.__u=="function";r&&t.__u(),r&&e==null||(t.__u=t(e))}else t.current=e}catch(i){y.__e(i,n)}}function cn(t,e,n){var r,i;if(y.unmount&&y.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||lt(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(s){y.__e(s,e)}r.base=r.__P=null}if(r=t.__k)for(i=0;i<r.length;i++)r[i]&&cn(r[i],e,n||typeof t.type!="function");n||nn(t.__e),t.__c=t.__=t.__e=t.__d=void 0}function Wn(t,e,n){return this.constructor(t,n)}function un(t,e,n){var r,i,s,o;y.__&&y.__(t,e),i=(r=typeof n=="function")?null:n&&n.__k||e.__k,s=[],o=[],ut(e,t=(!r&&n||e).__k=F(ee,null,[t]),i||fe,fe,e.namespaceURI,!r&&n?[n]:i?null:e.firstChild?_e.call(e.childNodes):null,s,!r&&n?n:i?i.__e:e.firstChild,r,o),an(s,t,o)}function ln(t,e){un(t,e,ln)}function Tt(t,e,n){var r,i,s,o,a=D({},t.props);for(s in t.type&&t.type.defaultProps&&(o=t.type.defaultProps),e)s=="key"?r=e[s]:s=="ref"?i=e[s]:a[s]=e[s]===void 0&&o!==void 0?o[s]:e[s];return arguments.length>2&&(a.children=arguments.length>3?_e.call(arguments,2):n),le(t.type,a,r||t.key,i||t.ref,null)}function hn(t,e){var n={__c:e="__cC"+en++,__:t,Consumer:function(r,i){return r.children(i)},Provider:function(r){var i,s;return this.getChildContext||(i=new Set,(s={})[e]=this,this.getChildContext=function(){return s},this.componentWillUnmount=function(){i=null},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&i.forEach(function(a){a.__e=!0,Ze(a)})},this.sub=function(o){i.add(o);var a=o.componentWillUnmount;o.componentWillUnmount=function(){i&&i.delete(o),a&&a.call(o)}}),r.children}};return n.Provider.__=n.Consumer.contextType=n}_e=tn.slice,y={__e:function(t,e,n,r){for(var i,s,o;e=e.__;)if((i=e.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(t)),o=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,r||{}),o=i.__d),o)return i.__E=i}catch(a){t=a}throw t}},Gt=0,Qt=function(t){return t!=null&&t.constructor==null},B.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=D({},this.state),typeof t=="function"&&(t=t(D({},n),this.props)),t&&D(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),Ze(this))},B.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Ze(this))},B.prototype.render=ee,Y=[],Zt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Xe=function(t,e){return t.__v.__b-e.__v.__b},Le.__r=0,ct=0,Ge=kt(!1),Qe=kt(!0),en=0;var Vn=0;function h(t,e,n,r,i,s){e||(e={});var o,a,c=e;"ref"in e&&(o=e.ref,delete e.ref);var l={type:t,props:c,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--Vn,__i:-1,__u:0,__source:i,__self:s};if(typeof t=="function"&&(o=t.defaultProps))for(a in o)c[a]===void 0&&(c[a]=o[a]);return y.vnode&&y.vnode(l),l}var z,w,Me,Et,de=0,fn=[],T=y,St=T.__b,Ct=T.__r,xt=T.diffed,At=T.__c,Rt=T.unmount,Ot=T.__;function ye(t,e){T.__h&&T.__h(w,t,de||e),de=0;var n=w.__H||(w.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function U(t){return de=1,J(_n,t)}function J(t,e,n){var r=ye(z++,2);if(r.t=t,!r.__c&&(r.__=[n?n(e):_n(void 0,e),function(a){var c=r.__N?r.__N[0]:r.__[0],l=r.t(c,a);c!==l&&(r.__N=[l,r.__[1]],r.__c.setState({}))}],r.__c=w,!w.u)){var i=function(a,c,l){if(!r.__c.__H)return!0;var f=r.__c.__H.__.filter(function(d){return!!d.__c});if(f.every(function(d){return!d.__N}))return!s||s.call(this,a,c,l);var u=!1;return f.forEach(function(d){if(d.__N){var p=d.__[0];d.__=d.__N,d.__N=void 0,p!==d.__[0]&&(u=!0)}}),!(!u&&r.__c.props===a)&&(!s||s.call(this,a,c,l))};w.u=!0;var s=w.shouldComponentUpdate,o=w.componentWillUpdate;w.componentWillUpdate=function(a,c,l){if(this.__e){var f=s;s=void 0,i(a,c,l),s=f}o&&o.call(this,a,c,l)},w.shouldComponentUpdate=i}return r.__N||r.__}function M(t,e){var n=ye(z++,3);!T.__s&&ht(n.__H,e)&&(n.__=t,n.i=e,w.__H.__h.push(n))}function pn(t,e){var n=ye(z++,4);!T.__s&&ht(n.__H,e)&&(n.__=t,n.i=e,w.__h.push(n))}function L(t){return de=5,ne(function(){return{current:t}},[])}function ne(t,e){var n=ye(z++,7);return ht(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function xe(t,e){return de=8,ne(function(){return t},e)}function dn(t){var e=w.context[t.__c],n=ye(z++,9);return n.c=t,e?(n.__==null&&(n.__=!0,e.sub(w)),e.props.value):t.__}function Kn(){for(var t;t=fn.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Ae),t.__H.__h.forEach(et),t.__H.__h=[]}catch(e){t.__H.__h=[],T.__e(e,t.__v)}}T.__b=function(t){w=null,St&&St(t)},T.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Ot&&Ot(t,e)},T.__r=function(t){Ct&&Ct(t),z=0;var e=(w=t.__c).__H;e&&(Me===w?(e.__h=[],w.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(e.__h.forEach(Ae),e.__h.forEach(et),e.__h=[],z=0)),Me=w},T.diffed=function(t){xt&&xt(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(fn.push(e)!==1&&Et===T.requestAnimationFrame||((Et=T.requestAnimationFrame)||jn)(Kn)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),Me=w=null},T.__c=function(t,e){e.some(function(n){try{n.__h.forEach(Ae),n.__h=n.__h.filter(function(r){return!r.__||et(r)})}catch(r){e.some(function(i){i.__h&&(i.__h=[])}),e=[],T.__e(r,n.__v)}}),At&&At(t,e)},T.unmount=function(t){Rt&&Rt(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{Ae(r)}catch(i){e=i}}),n.__H=void 0,e&&T.__e(e,n.__v))};var Pt=typeof requestAnimationFrame=="function";function jn(t){var e,n=function(){clearTimeout(r),Pt&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);Pt&&(e=requestAnimationFrame(n))}function Ae(t){var e=w,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),w=e}function et(t){var e=w;t.__c=t.__(),w=e}function ht(t,e){return!t||t.length!==e.length||e.some(function(n,r){return n!==t[r]})}function _n(t,e){return typeof e=="function"?e(t):e}let j,ce;const Yn=(t,e)=>{if(j=void 0,e&&e.type==="click"){if(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button!==0)return t;const n=e.target.closest("a[href]"),r=n&&n.getAttribute("href");if(!n||n.origin!=location.origin||/^#/.test(r)||!/^(_?self)?$/i.test(n.target)||ce&&(typeof ce=="string"?!r.startsWith(ce):!ce.test(r)))return t;j=!0,e.preventDefault(),e=n.href.replace(location.origin,"")}else typeof e=="string"?j=!0:e&&e.url?(j=!e.replace,e=e.url):e=location.pathname+location.search;return j===!0?history.pushState(null,"",e):j===!1&&history.replaceState(null,"",e),e},zn=(t,e,n)=>{t=t.split("/").filter(Boolean),e=(e||"").split("/").filter(Boolean);for(let r=0,i,s;r<Math.max(t.length,e.length);r++){let[,o,a,c]=(e[r]||"").match(/^(:?)(.*?)([+*?]?)$/);if(i=t[r],!(!o&&a==i)){if(!o&&i&&c=="*"){n.rest="/"+t.slice(r).map(decodeURIComponent).join("/");break}if(!o||!i&&c!="?"&&c!="*")return;if(s=c=="+"||c=="*",s?i=t.slice(r).map(decodeURIComponent).join("/")||void 0:i&&(i=decodeURIComponent(i)),n.params[a]=i,a in n||(n[a]=i),s)break}}return n};function ve(t){const[e,n]=J(Yn,t.url||location.pathname+location.search);t.scope&&(ce=t.scope);const r=j===!0,i=ne(()=>{const s=new URL(e,location.origin),o=s.pathname.replace(/\/+$/g,"")||"/";return{url:e,path:o,query:Object.fromEntries(s.searchParams),route:(a,c)=>n({url:a,replace:c}),wasPush:r}},[e]);return pn(()=>(addEventListener("click",n),addEventListener("popstate",n),()=>{removeEventListener("click",n),removeEventListener("popstate",n)}),[]),F(ve.ctx.Provider,{value:i},t.children)}const Jn=Promise.resolve();function yn(t){const[e,n]=J(E=>E+1,0),{url:r,query:i,wasPush:s,path:o}=re(),{rest:a=o,params:c={}}=dn(Nt),l=L(!1),f=L(o),u=L(0),d=L(),p=L(),_=L(),R=L(!1),k=L();k.current=!1;const m=L(!1);let b,H,O;pe(t.children).some(E=>{if(zn(a,E.props.path,O={...E.props,path:a,query:i,params:c,rest:""}))return b=Tt(E,O);E.props.default&&(H=Tt(E,O))});let q=b||H;ne(()=>{p.current=d.current;const E=p.current&&p.current.props.children;!E||!q||q.type!==E.type||q.props.component!==E.props.component?(this.__v&&this.__v.__k&&this.__v.__k.reverse(),u.current++,m.current=!0):m.current=!1},[r]);const K=d.current&&d.current.__u&ke&&d.current.__u&Te,be=d.current&&d.current.__h;d.current=F(Nt.Provider,{value:O},q),K?(d.current.__u|=ke,d.current.__u|=Te):be&&(d.current.__h=!0);const X=p.current;return p.current=null,this.__c=(E,A)=>{k.current=!0,p.current=X,t.onLoadStart&&t.onLoadStart(r),l.current=!0;let G=u.current;E.then(()=>{G===u.current&&(p.current=null,d.current&&(A.__h&&(d.current.__h=A.__h),A.__u&Te&&(d.current.__u|=Te),A.__u&ke&&(d.current.__u|=ke)),Jn.then(n))})},pn(()=>{const E=this.__v&&this.__v.__e;if(k.current){!R.current&&!_.current&&(_.current=E);return}!R.current&&_.current&&(_.current!==E&&_.current.remove(),_.current=null),R.current=!0,f.current!==o&&(s&&scrollTo(0,0),t.onRouteChange&&t.onRouteChange(r),f.current=o),t.onLoadEnd&&l.current&&t.onLoadEnd(r),l.current=!1},[o,s,e]),m.current?[F(He,{r:d}),F(He,{r:p})]:F(He,{r:d})}const ke=32,Te=128,He=({r:t})=>t.current;yn.Provider=ve;ve.ctx=hn({});const Nt=hn({}),Lt=t=>F(t.component,t),re=()=>dn(ve.ctx),Bt=y.__e;y.__e=(t,e,n)=>{if(t&&t.then){let r=e;for(;r=r.__;)if(r.__c&&r.__c.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),e.__k||(e.__k=[]),r.__c.__c(t,e)}Bt&&Bt(t,e,n)};let Ut;function Xn(t,e){if(typeof window>"u")return;let n=document.querySelector("script[type=isodata]");e=e||n&&n.parentNode||document.body,!Ut&&n?ln(t,e):un(t,e),Ut=!0}function Gn(){return h("div",{class:"about",children:[h("h1",{children:"About AQM FIU"}),h("p",{children:"This is a project for the FIU AQM. The goal is to develop a web application that can be used to add/remove/monitor offerings."})]})}function Qn(){return h("div",{class:"contact",children:[h("h1",{children:"Contact AQM FIU"}),h("p",{children:"If you have any questions or concerns, please contact us at questions@aqmfiu.com"})]})}var Zn=Symbol.for("preact-signals");function ft(){if(Q>1)Q--;else{for(var t,e=!1;he!==void 0;){var n=he;for(he=void 0,tt++;n!==void 0;){var r=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&mn(n))try{n.c()}catch(i){e||(t=i,e=!0)}n=r}}if(tt=0,Q--,e)throw t}}var g=void 0,he=void 0,Q=0,tt=0,Be=0;function vn(t){if(g!==void 0){var e=t.n;if(e===void 0||e.t!==g)return e={i:0,S:t,p:g.s,n:void 0,t:g,e:void 0,x:void 0,r:e},g.s!==void 0&&(g.s.n=e),g.s=e,t.n=e,32&g.f&&t.S(e),e;if(e.i===-1)return e.i=0,e.n!==void 0&&(e.n.p=e.p,e.p!==void 0&&(e.p.n=e.n),e.p=g.s,e.n=void 0,g.s.n=e,g.s=e),e}}function x(t){this.v=t,this.i=0,this.n=void 0,this.t=void 0}x.prototype.brand=Zn;x.prototype.h=function(){return!0};x.prototype.S=function(t){this.t!==t&&t.e===void 0&&(t.x=this.t,this.t!==void 0&&(this.t.e=t),this.t=t)};x.prototype.U=function(t){if(this.t!==void 0){var e=t.e,n=t.x;e!==void 0&&(e.x=n,t.e=void 0),n!==void 0&&(n.e=e,t.x=void 0),t===this.t&&(this.t=n)}};x.prototype.subscribe=function(t){var e=this;return qe(function(){var n=e.value,r=g;g=void 0;try{t(n)}finally{g=r}})};x.prototype.valueOf=function(){return this.value};x.prototype.toString=function(){return this.value+""};x.prototype.toJSON=function(){return this.value};x.prototype.peek=function(){var t=g;g=void 0;try{return this.value}finally{g=t}};Object.defineProperty(x.prototype,"value",{get:function(){var t=vn(this);return t!==void 0&&(t.i=this.i),this.v},set:function(t){if(t!==this.v){if(tt>100)throw new Error("Cycle detected");this.v=t,this.i++,Be++,Q++;try{for(var e=this.t;e!==void 0;e=e.x)e.t.N()}finally{ft()}}}});function pt(t){return new x(t)}function mn(t){for(var e=t.s;e!==void 0;e=e.n)if(e.S.i!==e.i||!e.S.h()||e.S.i!==e.i)return!0;return!1}function gn(t){for(var e=t.s;e!==void 0;e=e.n){var n=e.S.n;if(n!==void 0&&(e.r=n),e.S.n=e,e.i=-1,e.n===void 0){t.s=e;break}}}function bn(t){for(var e=t.s,n=void 0;e!==void 0;){var r=e.p;e.i===-1?(e.S.U(e),r!==void 0&&(r.n=e.n),e.n!==void 0&&(e.n.p=r)):n=e,e.S.n=e.r,e.r!==void 0&&(e.r=void 0),e=r}t.s=n}function ie(t){x.call(this,void 0),this.x=t,this.s=void 0,this.g=Be-1,this.f=4}(ie.prototype=new x).h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===Be))return!0;if(this.g=Be,this.f|=1,this.i>0&&!mn(this))return this.f&=-2,!0;var t=g;try{gn(this),g=this;var e=this.x();(16&this.f||this.v!==e||this.i===0)&&(this.v=e,this.f&=-17,this.i++)}catch(n){this.v=n,this.f|=16,this.i++}return g=t,bn(this),this.f&=-2,!0};ie.prototype.S=function(t){if(this.t===void 0){this.f|=36;for(var e=this.s;e!==void 0;e=e.n)e.S.S(e)}x.prototype.S.call(this,t)};ie.prototype.U=function(t){if(this.t!==void 0&&(x.prototype.U.call(this,t),this.t===void 0)){this.f&=-33;for(var e=this.s;e!==void 0;e=e.n)e.S.U(e)}};ie.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var t=this.t;t!==void 0;t=t.x)t.t.N()}};Object.defineProperty(ie.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var t=vn(this);if(this.h(),t!==void 0&&(t.i=this.i),16&this.f)throw this.v;return this.v}});function er(t){return new ie(t)}function wn(t){var e=t.u;if(t.u=void 0,typeof e=="function"){Q++;var n=g;g=void 0;try{e()}catch(r){throw t.f&=-2,t.f|=8,dt(t),r}finally{g=n,ft()}}}function dt(t){for(var e=t.s;e!==void 0;e=e.n)e.S.U(e);t.x=void 0,t.s=void 0,wn(t)}function tr(t){if(g!==this)throw new Error("Out-of-order effect");bn(this),g=t,this.f&=-2,8&this.f&&dt(this),ft()}function me(t){this.x=t,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}me.prototype.c=function(){var t=this.S();try{if(8&this.f||this.x===void 0)return;var e=this.x();typeof e=="function"&&(this.u=e)}finally{t()}};me.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,wn(this),gn(this),Q++;var t=g;return g=this,tr.bind(this,t)};me.prototype.N=function(){2&this.f||(this.f|=2,this.o=he,he=this)};me.prototype.d=function(){this.f|=8,1&this.f||dt(this)};function qe(t){var e=new me(t);try{e.c()}catch(n){throw e.d(),n}return e.d.bind(e)}var We;function se(t,e){y[t]=e.bind(null,y[t]||function(){})}function Ue(t){We&&We(),We=t&&t.S()}function kn(t){var e=this,n=t.data,r=rr(n);r.value=n;var i=ne(function(){for(var s=e.__v;s=s.__;)if(s.__c){s.__c.__$f|=4;break}return e.__$u.c=function(){var o;!Qt(i.peek())&&((o=e.base)==null?void 0:o.nodeType)===3?e.base.data=i.peek():(e.__$f|=1,e.setState({}))},er(function(){var o=r.value.value;return o===0?0:o===!0?"":o||""})},[]);return i.value}kn.displayName="_st";Object.defineProperties(x.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:kn},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}});se("__b",function(t,e){if(typeof e.type=="string"){var n,r=e.props;for(var i in r)if(i!=="children"){var s=r[i];s instanceof x&&(n||(e.__np=n={}),n[i]=s,r[i]=s.peek())}}t(e)});se("__r",function(t,e){Ue();var n,r=e.__c;r&&(r.__$f&=-2,(n=r.__$u)===void 0&&(r.__$u=n=function(i){var s;return qe(function(){s=this}),s.c=function(){r.__$f|=1,r.setState({})},s}())),Ue(n),t(e)});se("__e",function(t,e,n,r){Ue(),t(e,n,r)});se("diffed",function(t,e){Ue();var n;if(typeof e.type=="string"&&(n=e.__e)){var r=e.__np,i=e.props;if(r){var s=n.U;if(s)for(var o in s){var a=s[o];a!==void 0&&!(o in r)&&(a.d(),s[o]=void 0)}else n.U=s={};for(var c in r){var l=s[c],f=r[c];l===void 0?(l=nr(n,c,f,i),s[c]=l):l.o(f,i)}}}t(e)});function nr(t,e,n,r){var i=e in t&&t.ownerSVGElement===void 0,s=pt(n);return{o:function(o,a){s.value=o,r=a},d:qe(function(){var o=s.value.value;r[e]!==o&&(r[e]=o,i?t[e]=o:o?t.setAttribute(e,o):t.removeAttribute(e))})}}se("unmount",function(t,e){if(typeof e.type=="string"){var n=e.__e;if(n){var r=n.U;if(r){n.U=void 0;for(var i in r){var s=r[i];s&&s.d()}}}}else{var o=e.__c;if(o){var a=o.__$u;a&&(o.__$u=void 0,a.d())}}t(e)});se("__h",function(t,e,n,r){(r<3||r===9)&&(e.__$f|=2),t(e,n,r)});B.prototype.shouldComponentUpdate=function(t,e){var n=this.__$u;if(!(n&&n.s!==void 0||4&this.__$f)||3&this.__$f)return!0;for(var r in e)return!0;for(var i in t)if(i!=="__source"&&t[i]!==this.props[i])return!0;for(var s in this.props)if(!(s in t))return!0;return!1};function rr(t){return ne(function(){return pt(t)},[])}const $e={backendUrl:"https://finsav.exitcodenone.tech",userKey:"aqm-scb::user"};function Z(t,e,n){const r=$e.backendUrl,i={method:e,headers:{"Content-Type":"application/json"},credentials:"include"};return n&&(i.body=JSON.stringify(n)),fetch(`${r}${t}`,i)}function ge(){const t=window.localStorage.getItem($e.userKey),e=pt(t?JSON.parse(t):null);qe(()=>{window.localStorage.setItem($e.userKey,JSON.stringify(e.value))});const n=async(s,o)=>{const a=await Z("/auth/register","POST",{username:s,password:o,userType:"fiu"});try{const c=await a.json();e.value=c}catch(c){console.log({error:c}),i()}},r=async(s,o)=>{const a=await Z("/auth/login","POST",{username:s,password:o,userType:"fiu"});try{const c=await a.json();if(console.log({loginResponse:c}),!c||!c.success){i();return}e.value=c.user}catch(c){console.log({error:c}),i()}},i=async()=>{e.value=null,document.cookie="token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"};return{user:e,registerUser:n,loginUser:r,logoutUser:i}}const ir=(t,e)=>{switch(e.type){case"username":return{...t,username:e.value};case"password":return{...t,password:e.value};default:return t}};function sr(){const[t,e]=J(ir,{username:"",password:""}),{user:n,loginUser:r}=ge(),{route:i}=re(),s=o=>{if(!t.username||!t.password){alert("Please enter a username and password");return}r(t.username,t.password)};return M(()=>{n.value&&n.value.username&&i("/")},[n.value]),h("div",{class:"form-container",children:[h("form",{children:[h("input",{autoComplete:"username",type:"text",placeholder:"Username",onChange:o=>{e({type:"username",value:o.currentTarget.value})},value:t.username}),h("input",{autoComplete:"current-password",type:"password",placeholder:"Password",onChange:o=>{e({type:"password",value:o.currentTarget.value})},value:t.password})]}),h("div",{class:"button-container",children:[h("button",{class:"register-button",children:h("a",{href:"/register",children:"Register"})}),h("button",{onClick:s,children:"Login"})]})]})}const or=(t,e)=>{switch(e.type){case"username":return{...t,username:e.value};case"password":return{...t,password:e.value};case"confirmPassword":return{...t,confirmPassword:e.value};default:return t}};function ar(){const[t,e]=J(or,{username:"",password:"",confirmPassword:""}),{user:n,registerUser:r}=ge(),{route:i}=re(),s=o=>{if(t.password!==t.confirmPassword){alert("Passwords do not match");return}r(t.username,t.password)};return M(()=>{n.value&&n.value.username&&i("/login")},[n.value]),h("div",{class:"form-container",children:[h("form",{children:[h("input",{type:"text",placeholder:"Username",onChange:o=>{e({type:"username",value:o.currentTarget.value})},value:t.username,autoComplete:"username"}),h("input",{type:"password",placeholder:"Password",onChange:o=>{e({type:"password",value:o.currentTarget.value})},value:t.password,autoComplete:"new-password"}),h("input",{type:"password",placeholder:"Confirm Password",onChange:o=>{e({type:"confirmPassword",value:o.currentTarget.value})},value:t.confirmPassword,autoComplete:"new-password"})]}),h("div",{class:"button-container",children:[h("button",{class:"login-button",children:h("a",{href:"/login",children:"Login"})}),h("button",{onClick:s,children:"Register"})]})]})}function Ve({title:t,data:e,columns:n}){return h("div",{class:"table-container",children:[h("h2",{children:t}),h("table",{children:[h("thead",{children:h("tr",{children:n.map(r=>h("th",{children:r}))})}),h("tbody",{children:e.map(r=>h("tr",{children:n.map(i=>h("td",{children:r.details[i]}))}))})]})]})}function cr(){const[t,e]=U([]),[n,r]=U([]),[i,s]=U([]),{logoutUser:o}=ge();return M(()=>{const a=Z("/fiuofferings/bytype/loan","GET"),c=Z("/fiuofferings/bytype/sip","GET"),l=Z("/fiuofferings/bytype/fund","GET");Promise.all([a,c,l]).then(f=>{f[0].json().then(u=>{console.log(u),e(u)}),f[1].json().then(u=>{console.log(u),r(u)}),f[2].json().then(u=>{console.log(u),s(u)})}).catch(f=>{console.error(f),o()})},[]),h("div",{class:"home",children:[h("div",{class:"button-bar",children:[h("button",{children:h("a",{href:"/addoffering?type=loan",children:"+ Loan Offering"})}),h("button",{children:h("a",{href:"/addoffering?type=sip",children:"+ SIP Offering"})}),h("button",{children:h("a",{href:"/addoffering?type=fund",children:"+ Mutual Fund Offering"})})]}),h("div",{class:"existing",children:[h("h2",{children:"Existing Offerings"}),h(Ve,{title:"Loans",data:t,columns:["title","loanAmount","loanTenure","interestRate"]}),h(Ve,{title:"SIPs",data:n,columns:["title","sipAmount","sipTenure","sipFrequency"]}),h(Ve,{title:"Mutual Funds",data:i,columns:["title","fundType","fundAmount","fundTenure"]})]})]})}const ur=[{id:"title",fieldType:"text",label:"Title"},{id:"loanType",fieldType:"select",label:"Loan Type",options:[{value:"home",label:"Home Loan"},{value:"personal",label:"Personal Loan"},{value:"auto",label:"Auto Loan"},{value:"education",label:"Education Loan"},{value:"gold",label:"Gold Loan"},{value:"business",label:"Business Loan"}]},{id:"loanAmount",fieldType:"number",label:"Loan Amount (INR)"},{id:"interestRate",fieldType:"number",label:"Interest Rate (%)"},{id:"loanTenure",fieldType:"number",label:"Loan Tenure (Years)"},{id:"emi",fieldType:"number",label:"EMI (INR)"},{id:"processingFee",fieldType:"number",label:"Processing Fee (%)"},{id:"foreclosureCharges",fieldType:"number",label:"Foreclosure Charges (%)"},{id:"partPaymentCharges",fieldType:"number",label:"Part Payment Charges (%)"}],lr=[{id:"title",fieldType:"text",label:"Title"},{id:"sipAmount",fieldType:"number",label:"SIP Amount (INR)"},{id:"sipTenure",fieldType:"number",label:"SIP Tenure (Months)"},{id:"sipReturnRate",fieldType:"number",label:"Expected Return Rate (%)"},{id:"sipFrequency",fieldType:"select",label:"SIP Frequency",options:[{value:"monthly",label:"Monthly"},{value:"quarterly",label:"Quarterly"},{value:"halfYearly",label:"Half Yearly"},{value:"yearly",label:"Yearly"}]}],hr=[{id:"title",fieldType:"text",label:"Title"},{id:"fundAmount",fieldType:"number",label:"Fund Amount (INR)"},{id:"fundTenure",fieldType:"number",label:"Fund Tenure (Years)"},{id:"fundReturnRate",fieldType:"number",label:"Expected Return Rate (%)"},{id:"fundType",fieldType:"select",label:"Fund Type",options:[{value:"equity",label:"Equity"},{value:"debt",label:"Debt"},{value:"hybrid",label:"Hybrid"}]}],fr={loan:ur,sip:lr,fund:hr},pr=(t,e)=>({...t,[e.payload.id]:e.payload.value});function dr({fields:t,title:e}){const{route:n}=re(),[r,i]=J(pr,{}),{logoutUser:s}=ge(),o=async c=>{c.preventDefault();const l=await Z("/fiuofferings/create","POST",{offering_type:e,details:r});try{await l.json(),n("/")}catch(f){console.log({error:f}),s()}},a=()=>{n("/")};return h("div",{class:"container",children:[h("h2",{children:`Create New ${e==null?void 0:e.charAt(0).toUpperCase()}${e.substring(1)} Offering`}),h("form",{children:[t.map(c=>{var l;return h("div",{class:"form-field",children:[h("label",{for:c.id,children:c.label}),c.fieldType==="select"?h("select",{id:c.id,onChange:f=>i({type:"update",payload:{id:c.id,value:f.currentTarget.value}}),children:(l=c.options)==null?void 0:l.map(f=>h("option",{value:f.value,children:f.label}))}):h("input",{type:c.fieldType,id:c.id,onChange:f=>i({type:"update",payload:{id:c.id,value:f.currentTarget.value}})})]})}),h("div",{class:"btn-container",children:[h("button",{class:"btn-cancel",onClick:a,children:"Cancel"}),h("button",{onClick:o,children:"Submit"})]})]})]})}function _r(){const{query:t,path:e}=re(),[n,r]=U([]);return M(()=>{r(fr[t.type])},[t,e]),h(dr,{fields:n,title:t.type})}const yr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='%23ffffff'%20class='size-6'%3e%3cpath%20d='M3.478%202.404a.75.75%200%200%200-.926.941l2.432%207.905H13.5a.75.75%200%200%201%200%201.5H4.984l-2.432%207.905a.75.75%200%200%200%20.926.94%2060.519%2060.519%200%200%200%2018.445-8.986.75.75%200%200%200%200-1.218A60.517%2060.517%200%200%200%203.478%202.404Z'%20/%3e%3c/svg%3e";function $t(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var r in e)if(r!=="__source"&&t[r]!==e[r])return!0;return!1}function It(t,e){this.props=t,this.context=e}(It.prototype=new B).isPureReactComponent=!0,It.prototype.shouldComponentUpdate=function(t,e){return $t(this.props,t)||$t(this.state,e)};var qt=y.__b;y.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),qt&&qt(t)};var vr=y.__e;y.__e=function(t,e,n,r){if(t.then){for(var i,s=e;s=s.__;)if((i=s.__c)&&i.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),i.__c(t,e)}vr(t,e,n,r)};var Dt=y.unmount;function Tn(t,e,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),t.__c.__H=null),(t=function(r,i){for(var s in i)r[s]=i[s];return r}({},t)).__c!=null&&(t.__c.__P===n&&(t.__c.__P=e),t.__c=null),t.__k=t.__k&&t.__k.map(function(r){return Tn(r,e,n)})),t}function En(t,e,n){return t&&n&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(r){return En(r,e,n)}),t.__c&&t.__c.__P===e&&(t.__e&&n.appendChild(t.__e),t.__c.__e=!0,t.__c.__P=n)),t}function Ke(){this.__u=0,this.t=null,this.__b=null}function Sn(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function Ee(){this.u=null,this.o=null}y.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&32&t.__u&&(t.type=null),Dt&&Dt(t)},(Ke.prototype=new B).__c=function(t,e){var n=e.__c,r=this;r.t==null&&(r.t=[]),r.t.push(n);var i=Sn(r.__v),s=!1,o=function(){s||(s=!0,n.__R=null,i?i(a):a())};n.__R=o;var a=function(){if(!--r.__u){if(r.state.__a){var c=r.state.__a;r.__v.__k[0]=En(c,c.__c.__P,c.__c.__O)}var l;for(r.setState({__a:r.__b=null});l=r.t.pop();)l.forceUpdate()}};r.__u++||32&e.__u||r.setState({__a:r.__b=r.__v.__k[0]}),t.then(o,o)},Ke.prototype.componentWillUnmount=function(){this.t=[]},Ke.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=Tn(this.__b,n,r.__O=r.__P)}this.__b=null}var i=e.__a&&F(ee,null,t.fallback);return i&&(i.__u&=-33),[F(ee,null,e.__a?null:t.children),i]};var Ft=function(t,e,n){if(++n[1]===n[0]&&t.o.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.o.size))for(n=t.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.u=n=n[2]}};(Ee.prototype=new B).__a=function(t){var e=this,n=Sn(e.__v),r=e.o.get(t);return r[0]++,function(i){var s=function(){e.props.revealOrder?(r.push(i),Ft(e,t,r)):i()};n?n(s):s()}},Ee.prototype.render=function(t){this.u=null,this.o=new Map;var e=pe(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.o.set(e[n],this.u=[1,0,this.u]);return t.children},Ee.prototype.componentDidUpdate=Ee.prototype.componentDidMount=function(){var t=this;this.o.forEach(function(e,n){Ft(t,n,e)})};var mr=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,gr=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,br=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,wr=/[A-Z0-9]/g,kr=typeof document<"u",Tr=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(t)};B.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(B.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var Mt=y.event;function Er(){}function Sr(){return this.cancelBubble}function Cr(){return this.defaultPrevented}y.event=function(t){return Mt&&(t=Mt(t)),t.persist=Er,t.isPropagationStopped=Sr,t.isDefaultPrevented=Cr,t.nativeEvent=t};var xr={enumerable:!1,configurable:!0,get:function(){return this.class}},Ht=y.vnode;y.vnode=function(t){typeof t.type=="string"&&function(e){var n=e.props,r=e.type,i={},s=r.indexOf("-")===-1;for(var o in n){var a=n[o];if(!(o==="value"&&"defaultValue"in n&&a==null||kr&&o==="children"&&r==="noscript"||o==="class"||o==="className")){var c=o.toLowerCase();o==="defaultValue"&&"value"in n&&n.value==null?o="value":o==="download"&&a===!0?a="":c==="translate"&&a==="no"?a=!1:c[0]==="o"&&c[1]==="n"?c==="ondoubleclick"?o="ondblclick":c!=="onchange"||r!=="input"&&r!=="textarea"||Tr(n.type)?c==="onfocus"?o="onfocusin":c==="onblur"?o="onfocusout":br.test(o)&&(o=c):c=o="oninput":s&&gr.test(o)?o=o.replace(wr,"-$&").toLowerCase():a===null&&(a=void 0),c==="oninput"&&i[o=c]&&(o="oninputCapture"),i[o]=a}}r=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=pe(n.children).forEach(function(l){l.props.selected=i.value.indexOf(l.props.value)!=-1})),r=="select"&&i.defaultValue!=null&&(i.value=pe(n.children).forEach(function(l){l.props.selected=i.multiple?i.defaultValue.indexOf(l.props.value)!=-1:i.defaultValue==l.props.value})),n.class&&!n.className?(i.class=n.class,Object.defineProperty(i,"className",xr)):(n.className&&!n.class||n.class&&n.className)&&(i.class=i.className=n.className),e.props=i}(t),t.$$typeof=mr,Ht&&Ht(t)};var Wt=y.__r;y.__r=function(t){Wt&&Wt(t),t.__c};var Vt=y.diffed;y.diffed=function(t){Vt&&Vt(t);var e=t.props,n=t.__e;n!=null&&t.type==="textarea"&&"value"in e&&e.value!==n.value&&(n.value=e.value==null?"":e.value)};const I=Object.create(null);I.open="0";I.close="1";I.ping="2";I.pong="3";I.message="4";I.upgrade="5";I.noop="6";const Re=Object.create(null);Object.keys(I).forEach(t=>{Re[I[t]]=t});const nt={type:"error",data:"parser error"},Cn=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",xn=typeof ArrayBuffer=="function",An=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,_t=({type:t,data:e},n,r)=>Cn&&e instanceof Blob?n?r(e):Kt(e,r):xn&&(e instanceof ArrayBuffer||An(e))?n?r(e):Kt(new Blob([e]),r):r(I[t]+(e||"")),Kt=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function jt(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let je;function Ar(t,e){if(Cn&&t.data instanceof Blob)return t.data.arrayBuffer().then(jt).then(e);if(xn&&(t.data instanceof ArrayBuffer||An(t.data)))return e(jt(t.data));_t(t,!1,n=>{je||(je=new TextEncoder),e(je.encode(n))})}const Yt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ue=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Yt.length;t++)ue[Yt.charCodeAt(t)]=t;const Rr=t=>{let e=t.length*.75,n=t.length,r,i=0,s,o,a,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const l=new ArrayBuffer(e),f=new Uint8Array(l);for(r=0;r<n;r+=4)s=ue[t.charCodeAt(r)],o=ue[t.charCodeAt(r+1)],a=ue[t.charCodeAt(r+2)],c=ue[t.charCodeAt(r+3)],f[i++]=s<<2|o>>4,f[i++]=(o&15)<<4|a>>2,f[i++]=(a&3)<<6|c&63;return l},Or=typeof ArrayBuffer=="function",yt=(t,e)=>{if(typeof t!="string")return{type:"message",data:Rn(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:Pr(t.substring(1),e)}:Re[n]?t.length>1?{type:Re[n],data:t.substring(1)}:{type:Re[n]}:nt},Pr=(t,e)=>{if(Or){const n=Rr(t);return Rn(n,e)}else return{base64:!0,data:t}},Rn=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},On="",Nr=(t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach((s,o)=>{_t(s,!1,a=>{r[o]=a,++i===n&&e(r.join(On))})})},Lr=(t,e)=>{const n=t.split(On),r=[];for(let i=0;i<n.length;i++){const s=yt(n[i],e);if(r.push(s),s.type==="error")break}return r};function Br(){return new TransformStream({transform(t,e){Ar(t,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(n)})}})}let Ye;function Se(t){return t.reduce((e,n)=>e+n.length,0)}function Ce(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)n[i]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function Ur(t,e){Ye||(Ye=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,a){for(n.push(o);;){if(r===0){if(Se(n)<1)break;const c=Ce(n,1);s=(c[0]&128)===128,i=c[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(Se(n)<2)break;const c=Ce(n,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(Se(n)<8)break;const c=Ce(n,8),l=new DataView(c.buffer,c.byteOffset,c.length),f=l.getUint32(0);if(f>Math.pow(2,21)-1){a.enqueue(nt);break}i=f*Math.pow(2,32)+l.getUint32(4),r=3}else{if(Se(n)<i)break;const c=Ce(n,i);a.enqueue(yt(s?c:Ye.decode(c),e)),r=0}if(i===0||i>t){a.enqueue(nt);break}}}})}const Pn=4;function S(t){if(t)return $r(t)}function $r(t){for(var e in S.prototype)t[e]=S.prototype[e];return t}S.prototype.on=S.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};S.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};S.prototype.off=S.prototype.removeListener=S.prototype.removeAllListeners=S.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+t],this};S.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this};S.prototype.emitReserved=S.prototype.emit;S.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};S.prototype.hasListeners=function(t){return!!this.listeners(t).length};const De=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),P=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Ir="arraybuffer";function Nn(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const qr=P.setTimeout,Dr=P.clearTimeout;function Fe(t,e){e.useNativeTimers?(t.setTimeoutFn=qr.bind(P),t.clearTimeoutFn=Dr.bind(P)):(t.setTimeoutFn=P.setTimeout.bind(P),t.clearTimeoutFn=P.clearTimeout.bind(P))}const Fr=1.33;function Mr(t){return typeof t=="string"?Hr(t):Math.ceil((t.byteLength||t.size)*Fr)}function Hr(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function Ln(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Wr(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function Vr(t){let e={},n=t.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class Kr extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class vt extends S{constructor(e){super(),this.writable=!1,Fe(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new Kr(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=yt(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=Wr(e);return n.length?"?"+n:""}}class jr extends vt{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};Lr(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Nr(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Ln()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let Bn=!1;try{Bn=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Yr=Bn;function zr(){}class Jr extends jr{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}class $ extends S{constructor(e,n,r){super(),this.createRequest=e,Fe(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=Nn(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=$.requestsCount++,$.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=zr,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete $.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}$.requestsCount=0;$.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",zt);else if(typeof addEventListener=="function"){const t="onpagehide"in P?"pagehide":"unload";addEventListener(t,zt,!1)}}function zt(){for(let t in $.requests)$.requests.hasOwnProperty(t)&&$.requests[t].abort()}const Xr=function(){const t=Un({xdomain:!1});return t&&t.responseType!==null}();class Gr extends Jr{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=Xr&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new $(Un,this.uri(),e)}}function Un(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Yr))return new XMLHttpRequest}catch{}if(!e)try{return new P[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const $n=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Qr extends vt{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=$n?{}:Nn(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;_t(r,this.supportsBinary,s=>{try{this.doWrite(r,s)}catch{}i&&De(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Ln()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const ze=P.WebSocket||P.MozWebSocket;class Zr extends Qr{createSocket(e,n,r){return $n?new ze(e,n,r):n?new ze(e,n):new ze(e)}doWrite(e,n){this.ws.send(n)}}class ei extends vt{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=Ur(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),i=Br();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const s=()=>{r.read().then(({done:a,value:c})=>{a||(this.onPacket(c),s())}).catch(a=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;this._writer.write(r).then(()=>{i&&De(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const ti={websocket:Zr,webtransport:ei,polling:Gr},ni=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ri=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function rt(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=ni.exec(t||""),s={},o=14;for(;o--;)s[ri[o]]=i[o]||"";return n!=-1&&r!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=ii(s,s.path),s.queryKey=si(s,s.query),s}function ii(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function si(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}const it=typeof addEventListener=="function"&&typeof removeEventListener=="function",Oe=[];it&&addEventListener("offline",()=>{Oe.forEach(t=>t())},!1);class V extends S{constructor(e,n){if(super(),this.binaryType=Ir,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=rt(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=rt(n.host).host);Fe(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Vr(this.opts.query)),it&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Oe.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=Pn,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&V.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",V.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=Mr(i)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,De(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:e,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(V.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),it&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=Oe.indexOf(this._offlineEventListener);r!==-1&&Oe.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}V.protocol=Pn;class oi extends V{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;V.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",u=>{if(!r)if(u.type==="pong"&&u.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;V.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(f(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const d=new Error("probe error");d.transport=n.name,this.emitReserved("upgradeError",d)}}))};function s(){r||(r=!0,f(),n.close(),n=null)}const o=u=>{const d=new Error("probe error: "+u);d.transport=n.name,s(),this.emitReserved("upgradeError",d)};function a(){o("transport closed")}function c(){o("socket closed")}function l(u){n&&u.name!==n.name&&s()}const f=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",a),this.off("close",c),this.off("upgrading",l)};n.once("open",i),n.once("error",o),n.once("close",a),this.once("close",c),this.once("upgrading",l),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let ai=class extends oi{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>ti[i]).filter(i=>!!i)),super(e,r)}};function ci(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=rt(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+e,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const ui=typeof ArrayBuffer=="function",li=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,In=Object.prototype.toString,hi=typeof Blob=="function"||typeof Blob<"u"&&In.call(Blob)==="[object BlobConstructor]",fi=typeof File=="function"||typeof File<"u"&&In.call(File)==="[object FileConstructor]";function mt(t){return ui&&(t instanceof ArrayBuffer||li(t))||hi&&t instanceof Blob||fi&&t instanceof File}function Pe(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(Pe(t[n]))return!0;return!1}if(mt(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Pe(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Pe(t[n]))return!0;return!1}function pi(t){const e=[],n=t.data,r=t;return r.data=st(n,e),r.attachments=e.length,{packet:r,buffers:e}}function st(t,e){if(!t)return t;if(mt(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=st(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=st(t[r],e));return n}return t}function di(t,e){return t.data=ot(t.data,e),delete t.attachments,t}function ot(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=ot(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=ot(t[n],e));return t}const _i=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],yi=5;var v;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(v||(v={}));class vi{constructor(e){this.replacer=e}encode(e){return(e.type===v.EVENT||e.type===v.ACK)&&Pe(e)?this.encodeAsBinary({type:e.type===v.EVENT?v.BINARY_EVENT:v.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===v.BINARY_EVENT||e.type===v.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=pi(e),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}function Jt(t){return Object.prototype.toString.call(t)==="[object Object]"}class gt extends S{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===v.BINARY_EVENT;r||n.type===v.BINARY_ACK?(n.type=r?v.EVENT:v.ACK,this.reconstructor=new mi(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(mt(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(v[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===v.BINARY_EVENT||r.type===v.BINARY_ACK){const s=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const o=e.substring(s,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(s,n)}else r.nsp="/";const i=e.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}r.id=Number(e.substring(s,n+1))}if(e.charAt(++n)){const s=this.tryParse(e.substr(n));if(gt.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case v.CONNECT:return Jt(n);case v.DISCONNECT:return n===void 0;case v.CONNECT_ERROR:return typeof n=="string"||Jt(n);case v.EVENT:case v.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&_i.indexOf(n[0])===-1);case v.ACK:case v.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class mi{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=di(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const gi=Object.freeze(Object.defineProperty({__proto__:null,Decoder:gt,Encoder:vi,get PacketType(){return v},protocol:yi},Symbol.toStringTag,{value:"Module"}));function N(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const bi=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class qn extends S{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[N(e,"open",this.onopen.bind(this)),N(e,"packet",this.onpacket.bind(this)),N(e,"error",this.onerror.bind(this)),N(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,i,s;if(bi.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:v.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const f=this.ids++,u=n.pop();this._registerAckCallback(f,u),o.id=f}const a=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!a||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);n.call(this,new Error("operation has timed out"))},i),o=(...a)=>{this.io.clearTimeoutFn(s),n.apply(this,a)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...n){return new Promise((r,i)=>{const s=(o,a)=>o?i(o):r(a);s.withError=!0,n.push(s),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...s)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:v.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case v.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case v.EVENT:case v.BINARY_EVENT:this.onevent(e);break;case v.ACK:case v.BINARY_ACK:this.onack(e);break;case v.DISCONNECT:this.ondisconnect();break;case v.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:v.ACK,id:e,data:i}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:v.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function oe(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}oe.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};oe.prototype.reset=function(){this.attempts=0};oe.prototype.setMin=function(t){this.ms=t};oe.prototype.setMax=function(t){this.max=t};oe.prototype.setJitter=function(t){this.jitter=t};class at extends S{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Fe(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new oe({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||gi;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new ai(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=N(n,"open",function(){r.onopen(),e&&e()}),s=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=N(n,"error",s);if(this._timeout!==!1){const a=this._timeout,c=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},a);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(N(e,"ping",this.onping.bind(this)),N(e,"data",this.ondata.bind(this)),N(e,"error",this.onerror.bind(this)),N(e,"close",this.onclose.bind(this)),N(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){De(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new qn(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const ae={};function Ne(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=ci(t,e.path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=ae[i]&&s in ae[i].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let c;return a?c=new at(r,e):(ae[i]||(ae[i]=new at(r,e)),c=ae[i]),n.query&&!e.query&&(e.query=n.queryKey),c.socket(n.path,e)}Object.assign(Ne,{Manager:at,Socket:qn,io:Ne,connect:Ne});const C=[];for(let t=0;t<256;++t)C.push((t+256).toString(16).slice(1));function wi(t,e=0){return(C[t[e+0]]+C[t[e+1]]+C[t[e+2]]+C[t[e+3]]+"-"+C[t[e+4]]+C[t[e+5]]+"-"+C[t[e+6]]+C[t[e+7]]+"-"+C[t[e+8]]+C[t[e+9]]+"-"+C[t[e+10]]+C[t[e+11]]+C[t[e+12]]+C[t[e+13]]+C[t[e+14]]+C[t[e+15]]).toLowerCase()}let Je;const ki=new Uint8Array(16);function Ti(){if(!Je){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Je=crypto.getRandomValues.bind(crypto)}return Je(ki)}const Ei=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Xt={randomUUID:Ei};function Si(t,e,n){if(Xt.randomUUID&&!e&&!t)return Xt.randomUUID();t=t||{};const r=t.random||(t.rng||Ti)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,wi(r)}function Ci({url:t,onConnect:e,onDisconnect:n,onMessage:r,onError:i}){const[s,o]=U(!1),a=L(null);return M(()=>{let c=sessionStorage.getItem("session_id");return c||(sessionStorage.setItem("session_id",Si()),c=sessionStorage.getItem("session_id")),a.current||(a.current=Ne(`${t}?session_id=${c}`,{autoConnect:!1})),()=>{var l,f;(l=a.current)==null||l.removeAllListeners(),(f=a.current)==null||f.close()}},[t]),M(()=>{a.current&&(a.current.removeAllListeners(),a.current.on("connect",()=>{console.log(`Socket Connected to ${t}`),o(!0),e==null||e()}),a.current.on("disconnect",(c,l)=>{console.log(`Socket Disconnected from ${t}`),o(!1),n==null||n(c,l)}),a.current.on("message",c=>{console.log(`Socket Message from ${t}`),r(c)}),a.current.on("error",c=>{console.log(`Socket Error from ${t}`),console.log(c),o(!1),i==null||i(c)}))},[e,n,r,i,a]),{sendMessage:c=>{var l;console.log(`Message to send to socket: ${JSON.stringify(c,null,2)}`),console.log(`Socket Connected: ${s}`),(l=a.current)==null||l.emit("client-message",c)},closeConnection:()=>{var c;(c=a.current)==null||c.close()},connect:()=>{var c;(c=a.current)==null||c.connect()},getIsConnected:()=>s}}function xi({currentQuestion:t,setCurrentQuestion:e,updateMessageHistory:n,detectedLanguage:r,setDetectedLanguage:i}){const[s,o]=U(!1),[a,c]=U(!1),[l,f]=U({}),u=Ci({url:$e.backendUrl+"/chat",onMessage:_=>{switch(_.event){case"answer-text":if(r&&r.lang_code&&r.lang_code!=="en"){u.sendMessage({event:"translate",content:{text:_.content,targetLanguage:r.lang_code},needsTTS:_.needsTTS});return}if(_.needsTTS){u.sendMessage({event:"tts",content:_.content});return}_.endUserDetails&&f(_.endUserDetails),n({text:_.content,type:"bot"});break;case"language":i(_.content);break;case"translation":if(!_.toUserLanguage){u.sendMessage({event:"question-text",content:_.content.trim(),endUserDetails:l});return}if(!_.needsTTS){n({text:_.content,type:"bot"});return}u.sendMessage({event:"tts",content:_.content});break;case"articulating":n({text:_.content,type:"articulation",clearTrigger:_.clearTrigger});break;case"answer-voice":i({lang_code:_.content.source_lang_code,lang_name:_.content.source_lang_name}),u.sendMessage({event:"question-text",content:_.content.text,needsTTS:!0,endUserDetails:l});break;case"tts":n({text:"Audio Response",type:"bot",isAudio:!0})}}});M(()=>{t&&t.length>0&&!s&&o(!0),c(t.split(" ").length>3)},[t,s]),M(()=>{a&&!r&&(u.getIsConnected()||u.connect(),u.sendMessage({event:"get-language",content:t}))},[r,a]);const d=xe(()=>{if(t&&t.length>0){if(u.getIsConnected()||u.connect(),!r){console.log("Detected language is null");return}r.lang_code!=="en"?u.sendMessage({event:"translate",content:{text:t,targetLanguage:"en"}}):u.sendMessage({event:"question-text",content:t,endUserDetails:l})}n({text:t,type:"user"})},[t,u]),p=xe(_=>{e(_.currentTarget.value)},[e,u,r]);return xe(_=>{u.getIsConnected()||u.connect(),u.sendMessage({event:"question-voice",content:_})},[u]),h("div",{class:"chatbox-container",children:[h("input",{type:"text",value:t,onChange:p}),h("button",{onClick:d,children:h("img",{src:yr,alt:"Send",width:25,height:25})})]})}function Ai(t,e){switch(e.type){case"add":return[...t,e.message];case"add-articulation":return[...t.filter(r=>r.type!=="articulation"),e.message];case"remove-articulation":return t.filter(r=>r.type!=="articulation");case"clear":return[];default:return t}}function Ri(){const[t,e]=U(""),[n,r]=J(Ai,[]),[i,s]=U({lang_code:"en",lang_name:"English"}),o=xe(a=>{const c=a.type==="articulation"?a.clearTrigger?"remove-articulation":"add-articulation":"add";r({type:c,message:a}),e("")},[]);return h("div",{class:"chats",children:[n.map((a,c)=>h("div",{class:"chat-message",children:a.type==="user"?h("div",{class:"user-message",children:a.text}):a.type==="bot"?h("div",{class:"bot-message",children:a.text}):h("div",{class:"articulation-message",children:a.text})},c)),h(xi,{currentQuestion:t,setCurrentQuestion:e,updateMessageHistory:o,detectedLanguage:i,setDetectedLanguage:s})]})}const W={"/":{path:"/",component:cr,showInNav:!1,protected:!0},"/chat":{path:"/chat",component:Ri,showInNav:!0,protected:!1},"/about":{path:"/about",component:Gn,showInNav:!0,protected:!0},"/contact":{path:"/contact",component:Qn,showInNav:!0,protected:!0},"/login":{path:"/login",component:sr,showInNav:!0,protected:!1},"/register":{path:"/register",component:ar,showInNav:!1,protected:!1},"/addoffering":{path:"/addoffering",component:_r,showInNav:!1,protected:!0}};function Oi(){const{url:t,route:e}=re(),{user:n,logoutUser:r}=ge();return M(()=>{!n.value&&W[t].protected&&e("/login",!0)},[n.value,t]),h("header",{children:[h("a",{href:"/",children:"AQM FIU"}),h("nav",{children:Object.keys(W).filter(i=>W[i].showInNav).map(i=>i==="/login"&&n.value&&n.value.username?h("a",{href:"/",onClick:s=>{s.preventDefault(),r()},children:"logout"}):h("a",{href:W[i].path,class:t===W[i].path?"active":"",children:i.replace("/","")}))})]})}function Pi(){return h("section",{children:[h("h1",{children:"404: Not Found"}),h("p",{children:"It's gone :("})]})}function Ni(){return h(ve,{children:[h(Oi,{}),h("main",{children:h(yn,{children:[Object.keys(W).map(t=>h(Lt,{path:W[t].path,component:W[t].component})),h(Lt,{default:!0,component:Pi})]})})]})}typeof window<"u"&&Xn(h(Ni,{}),document.getElementById("app"));
